(function(){this.vf={}}).call(this);$(function(){vf.util.initModules();vf.util.initHelpers();var a;$(window).on("resize",function(b){clearTimeout(a);a=setTimeout(function(){$(this).trigger("vf::resize")},100)});setTimeout(function(){$(window).trigger("scroll")},1E3)});
(function(){vf.util={initModules:function(a){var b=[],c=[],d=$(".mod",a);a=$(a);0===a.length&&(a=$(document));a.each(function(){$(this).hasClass("mod")&&(d=d.add($(this)))});d.each(function(){var a=$(this).prop("class").match(/mod-([^ ]+)/g)||0;$.each(a,function(c){c=a[c].replace("mod-","");vf[c]?b.push(c):console.log("initModule: The module '"+c+"' does not exist")})});$.each(b,function(b,a){-1===$.inArray(a,c)&&c.push(a)});b=c;$.each(b,function(c){vf[b[c]].init(a)});return b},initHelpers:function(a){a=
$(a);0===a.length&&(a=$(document));vf.util.checkedState(a);vf.util.placeholderPoly(a);vf.util.mouseActive(a);vf.lazyload.init(a)},config:function(a){return"undefined"!==typeof vf.config[a]?vf.config[a]:!1},checkedState:function(a){var b=$(":checkbox, :radio",a);a.each(function(){$(this).is(":checkbox, :radio")&&(b=b.add($(this)))});var c=function(b){var a=$("label").filter('[for="'+b.prop("id")+'"]'),c=b.is(":radio")?"radio":"checkbox";b.is(":focus")?a.addClass("fm-focus"):b.is(":focus")||a.removeClass("fm-focus");
b.is(":checked")?("radio"==c&&d(b,e),a.addClass("checked")):e(b,a,c)},d=function(b){$(":radio").filter('[name="'+b.prop("name")+'"]').not(b).each(function(){var b=$(this),a=$("label").filter('[for="'+b.prop("id")+'"]'),c=b.is(":radio")?"radio":"checkbox";e(b,a,c)})},e=function(b,a,c){a.removeClass("checked")};$("body").off("change");$("body").on("change focus blur",":checkbox, :radio",function(){c($(this))});b.each(function(){c($(this))});return b},focus:function(a){a=$(a);"undefined"==typeof a.attr("tabindex")&&
(a.attr("tabindex","0"),setTimeout(function(){a.removeAttr("tabindex")},10));a.focus()},mouseActive:function(a){var b=$("body",a);b.on("mousedown",function(){b.addClass("mouse-active")});b.on("keydown",function(){b.removeClass("mouse-active")})},placeholderPoly:function(a){function b(b,a){b.val()===a&&b.val("").removeClass("placeholder")}function c(b,a){""!==b.val()&&b.val()!==a||b.val(a).addClass("placeholder")}if("placeholder"in document.createElement("input"))return!1;a=$(":input[placeholder]",
a).addBack(":input[placeholder]");a.each(function(){var a=$(this),e=a.prop("placeholder"),f=a.closest("form");c(a,e);a.bind("focus",function(){b(a,e)});a.bind("blur",function(){c(a,e)});f.bind("submit",function(){b(a,e)});$(window).bind("unload",function(){b(a,e)})});return a},layout:function(){var a="sml";"undefined"!=typeof window.matchMedia&&(620<=$(window).innerWidth()&&(a="med"),767<=$(window).innerWidth()&&(a="lrg"));return a}}})(vf);
$(function(){vf.carousel={settings:{carousel:".mod-carousel",blocks:".ca-body .ca-block",body:".ca-body",page:".ca-page",pages:".ca-pages",loader:".ca-load",pagination:".ca-pagination",nav:".ca-nav a",prime_nav:".ca-nav-primary",active_page:".ca-active"},init:function(a,b){var c=vf.carousel.settings;if(!("css3d"in c)){var d=document.body.style;c.css3d="transform"in d||"webkitTransform"in d}$(c.carousel,a).addBack(c.carousel).each(function(){var e=$(this),d=e.find(c.blocks),l=d.outerWidth(!0),g=vf.carousel.cap(Math.floor(e.width()/
l),1,e.data("span")),h=l*g;$.extend(e.data(),{computed_span:g,page_no:-1,page_count:Math.ceil(d.length/g)-1,translation:h,reversed:$(d.get().reverse()),animation_span:2*g-1,touchstart:0});"lrg"===vf.util.layout()?(e.find(c.body).height(d.outerHeight(!0)).width(h),d.each(function(b){var a=l*(b%g),d=1;c.css3d?a+=h:b>=g&&(d=0);$(this).css({left:a,opacity:d})})):e.find(c.body).add(d).removeAttr("style");e.find(c.pagination+","+c.prime_nav).toggle(!!e.data("page_count")&&"lrg"===vf.util.layout());vf.carousel.append_pages(e);
b?d.css("transform","translateX(0)"):(e.on("click",c.page,$.proxy(vf.carousel.goto_page,e)).on("touchstart touchmove touchend",$.proxy(vf.carousel.touch,e)).find(c.nav).on("click",$.proxy(vf.carousel.get_goto_page,e)),$(window).on("vf::resize",$.proxy(vf.carousel.init,this,a,!0)));e.find(c.page).eq(0).click()})},get_goto_page:function(a){var b=vf.carousel.cap(this.data("page_no")+$(a.currentTarget).data("direction"),0,this.data("page_count")),b=this.find(vf.carousel.settings.page).eq(b);vf.carousel.goto_page.apply(this,
[a,b])},goto_page:function(a,b){if("lrg"===vf.util.layout()){var c=vf.carousel.settings,d=this.find(c.blocks),e=this.data("computed_span");b||(b=$(a.currentTarget));if(!b.is(c.active_page)){var f=b.parent().index(),l=this.data("page_no"),g=f*e,h=[g,g+e-1],m=[(l-1)*e,g-1],p=[m[0]+e,m[0]+this.data("animation_span")],n=0,k=-this.data("translation");f<l&&(m=[g+e,p[1]+e],d=this.data("reversed"));d.each(function(){var a=$(this),b=a.index(),d=vf.carousel.in_range(b,h);if(c.css3d){var e=vf.carousel.in_range(b,
m),g=a.data("animation_id"),r=1,s=k;if(d||e)e&&(0<f&&(s*=2),f<l&&(s=0),vf.carousel.in_range(b,p)||(r=0)),g&&clearTimeout(g),a.data("animation_id",setTimeout(function(){a.css({transform:"translateX("+s+"px)",transitionDuration:"."+5*r+"s"})},150*n*r)),a.toggleClass("ca-block-active",f==b),n+=1*r}else a.css("opacity",d?1:0)});this.data("page_no",f);this.find(c.active_page).removeClass("ca-active");b.addClass("ca-active")}a.preventDefault()}},append_pages:function(a){for(var b="",c=0,d=a.data("page_count");c<=
d;c++)b+='<li><a href="#" class="ca-page"><span class="access">page '+(c+1)+"</span></a></li>";a.find(vf.carousel.settings.pages).html(b)},touch:function(a){a=a.originalEvent;switch(a.type){case "touchstart":this.data("touchstart",a.touches[0].pageX);break;case "touchmove":25<=Math.abs(a.touches[0].pageX-this.data("touchstart"))&&a.preventDefault();break;case "touchend":a=a.changedTouches[0].pageX;var b=this.data("touchstart");100<=Math.abs(a-b)&&this.find(vf.carousel.settings.nav).eq(b>a?1:0).click()}},
in_range:function(a,b){return a>=b[0]&&a<=b[1]},cap:function(a,b,c){return a<b?b:a>c?c:a}}}(vf));(function(){vf["eq-height"]={settings:{target:".mod-eq-height"},init:function(a){var b=this.settings;"lrg"===vf.util.layout()&&$(b.target,a).addBack(b.target).each(function(){var a=0;$(this).find($(this).data("eq-height")).each(function(b){$(this).height()>a&&(a=$(this).outerHeight())}).css("min-height",a).addClass("eq-height")})}}})(vf);
(function(){$.extend($.expr[":"],{unfilled:function(a){a=$(a);return!a.is("option")&&""==a.prop("value")}});vf.form={settings:{target:"form:not([novalidate])",required:".fm-required",error:".fm-error",checked:":checked, .checkbox",pattern:"[data-pattern]",data:".fm-data",onkeyup:".fm-onkeyup",errors:".fm-errors",group:".fm-data-group",errorborder:".fm-error-border"},errors:[],init:function(a){var b=vf.form.settings;$(b.target,a).addBack(b.target).each(function(){var a=$(this);a.on("submit",vf.form.exec).attr("novalidate",
!0);a.find(b.required+","+b.pattern).on("change",$.proxy(vf.form.exec,a))})},exec:function(a){var b=$(this),c=vf.form.settings,d=b.is(c.onkeyup);switch(a.type){case "change":if(!d)break;case "submit":d||b.addClass(c.onkeyup.substring(1));default:vf.form.check.apply(a.currentTarget,[a])}a.preventDefault()},check:function(a){a=$(this);var b=vf.form.settings,c=b.required+","+b.pattern,d=vf.form.errors=[];a.find(b.error).add(a.siblings(b.error)).remove();$.unique(a.find(c).addBack(c)).each(function(){var a=
$(this),c=[a.has(":radio")[0],[a.has(b.checked)[0],$.noop,$.proxy(vf.form.error,a)],[a.is(b.required),[a.has(":unfilled")[0]||a.is(":unfilled"),$.proxy(vf.form.error,a),[a.has(b.pattern)[0]||a.is(b.pattern),$.proxy(vf.form.match,a),$.noop]],[a.has(":unfilled")[0]||a.is(":unfilled"),$.noop,$.proxy(vf.form.match,a)]]];a.removeClass(b.errorborder.substring(1));vf.form.climb(c)});a.find(b.errors).toggle(!!d.length).find("ol").html(d.join("")).end().find(":header").html(vf.config.form.html.eheading.replace("{{count}}",
d.length))},climb:function(a){return"function"==typeof a?a():vf.form.climb(a[0]?a[1]:a[2])},match:function(){var a=this;a.find("input").addBack("input").each(function(){var b=$(this),c=vf.config.form.patterns[b.data("pattern")];if(!b.val().match(c.match))return vf.form.error.apply(a,[c.error])})},error:function(a){var b=vf.form.settings;a=a||vf.config.form.html.required;var c=this.parent(b.data).addBack("fieldset"+b.required),d=vf.config.form.html.error.replace("{{message}}",a);vf.form.errors.push('<li><a href="#'+
this.attr("id")+'">'+a+"</a></li>");c.prepend(d).find("label").prepend('<span class="\terror access">Error</span>');this.addClass(b.errorborder.substring(1))}}})(vf);
(function(){vf.nav={settings:{target:".mod-nav",mobile:".nav-head",active:"nav-active",trigger:".nav-trigger",base:".nav-base",close:".nav-close",aux:".nav-aux"},init:function(a){var b=this.settings;$(b.target,a).addBack(b.target).each(function(){var a=$(this),d=a.find(b.base),e=a.find(b.trigger),f=a.find(b.close);a.find(b.aux);var l=a.find("[data-target]");d.find(".nav-menu > li").each(function(){$(this).prepend('<span class="access">'+vf.config.string.show+"</span>").append('<span class="access">'+
vf.config.string.menu+"</span>")});e.prepend('<span class="access">'+vf.config.string.show+"</span>");f.append('<span class="access">'+vf.config.string.hide+vf.config.string.menu+"</span>");a.find(".bs-count").append("<span class='access'> "+vf.config.string.basket+" </span>");l.on("click",function(g){var h=$(this),m=h.data("target")||h.attr("href"),l=h.parent().hasClass(b.active),m=a.find(m);vf.nav.close(a);l||(h.parent().add(m).add(f).addClass(b.active),vf.util.focus(m),$("body").on("mouseup focusin",
null,a,vf.nav.bodyBind));0<d.has(h).length&&(l?e.removeClass(b.active):e.addClass(b.active));g.preventDefault()});f.on("click",function(b){vf.nav.close(a);b.preventDefault()});a.find(".jump-link").on("click",function(){vf.util.focus($("#content"))});a.on("keydown",".foot .nav-close",function(b){b=$(this).parent().parent().parent().attr("id");nextlink=a.find("[data-target='#"+b+"']");vf.util.focus(nextlink);vf.nav.close(a)});a.on("keydown",".items li",function(a){var b=$(this),c=b.parent().parent().next(),
d=b.parent().parent().prev();39===a.keyCode?(a=b.index(),a=c.find("li").eq(a),1===a.length?a.find("a").focus():c.find("li:last-child").find("a").focus()):37===a.keyCode?(a=b.index(),a=d.find("li").eq(a),1===a.length?a.find("a").focus():d.find("li:last-child").find("a").focus()):38===a.keyCode?(a.preventDefault(),b.prev("li").find("a").focus()):40===a.keyCode&&(a.preventDefault(),b.next("li").find("a").focus())})})},close:function(a){var b=this.settings;$(a).find("."+b.active).removeClass(b.active).prev("span").html(vf.config.string.show);
$("body").off("mouseup focusin",vf.nav.bodyBind)},bodyBind:function(a){var b=a.data;0===b.has(a.target).length&&vf.nav.close(b)}}})(vf);
(function(){vf.lazyload={settings:{unloaded:"img[data-src]",lazy:".lazyloaded"},init:function(a){$(window).on("resize scroll click",$.proxy(vf.lazyload.update,a));vf.lazyload.update.call(a)},update:function(){var a=vf.lazyload.settings;$(this).find(a.unloaded).each(function(){var b=$(this);vf.lazyload.inViewport(b)&&(setTimeout(function(){b.not(a.lazy).wrap('<span class="lazyloader">')},1500),b.attr("src",b.data("src")).removeData("src").ready(function(){b.addClass(a.lazy.substring(1));b.removeAttr("height").removeAttr("width")}))})},
inViewport:function(a){var b=a.offset(),c=$(window).scrollTop(),d=$(window).scrollLeft();return $(window).innerHeight()+c>b.top&&$(window).innerWidth()+d>b.left&&c<b.top+a.outerHeight(!0)&&d<b.left+a.outerWidth(!0)}}})(vf);
(function(){vf["multi-select"]={settings:{target:".mod-multi-select",imagesClass:"ms-images",iconActive:"i-step-number-alt",iconSelected:"i-success",iconDisabled:"i-step-number",iconChevron:"i-chevron"},init:function(a){var b=this.settings,c=a.find(b.target),d='<div class="fm-data">',d=d+'<label for="{id}"><i class="">{num}</i>{label}</label>',d=d+'<div class="fm-select">',d=d+'<select id="{id}" name="{id}"></select>',d=d+'<span><i class="i-arrow-down-grey-lrg"></i></span>',d=d+"</div>",d=d+"</div>";
c.each(function(){var c=$(this),f="undefined"!=typeof c.data("label3");c.data("steptrack");var l=c.attr("id"),g={},h="";c.find("select").each(function(){var c=a.find(b.target+" label[for="+$(this).attr("id")+"]").text(),d={img:$(this).data("img"),children:{}};f&&(g[c]=d);$(this).find("optgroup").each(function(){var a=$(this).attr("label"),b={img:$(this).data("img"),children:{}};f?g[c].children[a]=b:g[a]=b;$(this).find("option").each(function(){var b={img:$(this).data("img"),val:$(this).attr("value")};
f?g[c].children[a].children[$(this).text()]=b:g[a].children[$(this).text()]=b})})});h+=d.replace(/\{id\}/g,l+1).replace(/\{label\}/g,c.data("label1")).replace(/\{num\}/g,1);h+=d.replace(/\{id\}/g,l+2).replace(/\{label\}/g,c.data("label2")).replace(/\{num\}/g,2);f&&(h+=d.replace(/\{id\}/g,l+3).replace(/\{label\}/g,c.data("label3")).replace(/\{num\}/g,3));c.html(h);vf["multi-select"].updateSelect(g,c);c.on("change","select",function(a){vf["multi-select"].updateSelect(g,c,a.target)});c.on("click","."+
b.imagesClass+" li div",function(a){a=$(a.target).closest("div");c.find("#"+a.closest("."+b.imagesClass).data("id")).val(a.find("span").text()).change()})})},updateSelect:function(a,b,c){var d=this.settings,e="undefined"!=typeof b.data("label3"),f=b.attr("id"),l=!0==b.data("images"),g="",h=a,m=b.find("#"+f+"1").val(),p=b.find("#"+f+"2").val(),n,k=1,q="",t='<div class="'+d.imagesClass+' only-{size}" data-id="{id}">',t=t+('<i class="ms-chevron '+d.iconChevron+'"></i><ul class="cta-topic">{li}</ul></div>');
"undefined"!=typeof c&&(n=c.value,c=parseInt($(c).attr("id").replace(f,""))-1,""==n&&(n=0<c?b.find("#"+f+c).val():void 0));"undefined"!=typeof n&&$.each(a,function(a,b){a==n?(h=b.children,k=2):$.each(b.children,function(b,c){e?b==n&&a==m?(k=3,h=c.children):$.each(c.children,function(a,c){a==n&&b==p&&(k=4)}):b==n&&a==m&&(k=3)})});4==k||3==k&&!e?vf["multi-select"].submitForm(b):(q+='<option value="{name}" data-value-original="{val}">{name}</option>'.replace(/\{name\}/g,"").replace(/\{val\}/g,""),$.each(h,
function(a,b){var c="undefined"!=typeof b.val?b.val:"";q+='<option value="{name}" data-value-original="{val}">{name}</option>'.replace(/\{name\}/g,a).replace(/\{val\}/g,c);g+='<li><div><img src="{src}"><span>{name}</span></div></li>'.replace(/\{src\}/g,b.img).replace(/\{name\}/g,a)}),b.find("#"+f+k).html(q).prop("disabled",!1),l&&(b.find("."+d.imagesClass).remove(),ihtm=t.replace(/\{li\}/g,g).replace(/\{id\}/g,f+k),b.append(ihtm.replace(/\{size\}/g,"lrg")),b.find("#"+f+k).parent().parent().after(ihtm.replace(/\{size\}/g,
"sml"))),b.find("select").each(function(a){k-1==a?$(this).parent().parent().find("label i").attr("class",d.iconActive):k-1>a?$(this).parent().parent().find("label i").attr("class",d.iconSelected):$(this).prop("disabled","disabled").html("").parent().parent().find("label i").attr("class",d.iconDisabled)}),1==k?b.find("."+d.imagesClass+".only-lrg .ms-chevron").addClass("ms-chevron-left"):3==k&&b.find("."+d.imagesClass+".only-lrg .ms-chevron").addClass("ms-chevron-right"))},submitForm:function(a){a.find("select").each(function(){var a=
$(this).find(":selected");a.attr("value",a.data("value-original"));this.value=a.data("value-original")})}}})(vf);
(function(){vf.quicklinks={settings:{target:".mod-quicklinks",username:"#ql-username",password:"#ql-password",box:".ql-login",lastFocus:""},init:function(a){var b=this.settings,c=$("#ql-password, #ql-username");$(b.target,a).addBack(b.target).each(function(){c.bind("focus",$.proxy(vf.quicklinks.open,this));c.bind("focusout",$.proxy(vf.quicklinks.close,this))})},open:function(a){$(this).addClass("ql-display")},close:function(a){var b=vf.quicklinks.settings,c=$(this);a=$(a.currentTarget);var d=c.find(b.username),
e=c.find(b.password);""===e.val()&&""===d.val()&&(c.removeClass("ql-display"),a.is(e)&&b.lastFocus==b.username&&c.find(b.box).next().find("a, input").filter(":visible").eq(0).focus());b.lastFocus="#"+a.attr("id")}}})(vf);
(function(){vf.toggle={settings:{target:".mod-toggle",head:".tg-head",body:".tg-body",active:".tg-active",modal:".tg-modal",close:".tg-close",ajax:".tg-ajax",more:".tg-more",display:".tg-display"},init:function(a){var b=vf.toggle.settings,c=vf.toggle.html={modal_content:'<div class="tg-body"><div class="tg-ajax"></div><a href="#" class="tg-close">CLOSE<span class="access"> modal</span><i class="i-close-lrg"></i></a><div class="tg-overlay tg-close"></div></div>',access:{standard:'<span class="access"><span class="tg-hide">'+
vf.config.string.hide+' </span><span class="tg-show">'+vf.config.string.show+" </span></span>"}};$(b.target,a).addBack(b.target).each(function(){var a=$(this),e=$(b.head,a);$(b.close,a);"lrg"===vf.util.layout()&&a.is(b.modal)&&a.append(c.modal_content);a.on("click",b.head+", "+b.close,$.proxy(vf.toggle.toggle,a));e.prepend(vf.toggle.html.access.standard)})},toggle:function(a){var b=this.data("scope"),c=vf.util.layout(),d=vf.toggle.settings,e=$(a.currentTarget),f=this.data("hint"),l=this.data("radio"),
g=d.active.substring(1),h=d.display.substring(1),m=e.is(d.close);if($("body").hasClass("mouse-active")||!this.hasClass("tg-modal"))if(!this.hasClass("tg-modal")||"lrg"===vf.util.layout())if(!b||c==b||"med"==c){f=f?f.split("-"):[f];if(m)b=e.closest(d.body);else switch(f[1]||f[0]){case "ext":b=$(e.attr("href"),this)||e.data("href");break;case "next":b=e.next(d.body);break;default:b=$(d.body,this)}if(0!==b.length){a.preventDefault();if(l&&(a=this.find(d.active),this.find(d.body).removeClass(h),a.removeClass(g),
e.is(a)&&!this.data("always-open")||m))return 0;m||e.toggleClass(g);b.toggleClass(h,l);if("ajax"==f[0]){var p=e.prop("href"),n=p.substring(p.indexOf("#")),k=$(d.ajax,b).addBack().last();k.css("min-height",k.height()).append(vf.config.ajax_load).delay(2E3).queue(function(){k.load(p+" "+n,function(){vf.util.initModules(k);vf.util.initHelpers(k);k.css("min-height","")})}).dequeue()}$(window).trigger("scroll")}}}}})(vf);